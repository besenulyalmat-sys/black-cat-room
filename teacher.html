<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Black Cat Room ‚Äì Teacher</title>

<style>
body {
    margin:0;
    font-family:Arial;
    background:linear-gradient(135deg,#0f0f0f,#141414,#1a1f1c);
    color:#00ff9d;
}
.container {
    width:90%;
    margin:auto;
    margin-top:30px;
}
input, textarea {
    width:100%;
    padding:10px;
    margin-bottom:10px;
    background:#111;
    color:#00ff9d;
    border:1px solid #00ff9d;
    border-radius:8px;
}
button {
    padding:10px 20px;
    background:#00ff9d;
    border:none;
    border-radius:8px;
    cursor:pointer;
    font-weight:bold;
}
.answer-card {
    background:#1a1a1a;
    padding:10px;
    margin-top:10px;
    border-left:4px solid #00ff9d;
}
</style>
</head>

<body>

<div class="container">

<h1>üêæ Black Cat Room ‚Äì Teacher</h1>

<input id="roomCode" placeholder="Room code...">
<textarea id="taskInput" placeholder="Write task here..."></textarea>
<button onclick="sendTask()">Send Task</button>
<button onclick="loadAnswers()">Show Answers</button>

<h2>Student Answers:</h2>
<div id="answers"></div>

</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyBsrZ_k2K8u0ybvkEDoEywD_QWzmDTKjyY",
  authDomain: "black-cat-room.firebaseapp.com",
  databaseURL: "https://black-cat-room-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "black-cat-room",
  storageBucket: "black-cat-room.firebasestorage.app",
  messagingSenderId: "80028312826",
  appId: "1:80028312826:web:ee918db88c71a0c1335543"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

window.sendTask = function() {
  const room = document.getElementById("roomCode").value;
  const task = document.getElementById("taskInput").value;

  if(!room || !task) return alert("Enter room and task");

  set(ref(db, "rooms/" + room + "/task"), task);
  alert("Task sent");
};

window.loadAnswers = function() {
  const room = document.getElementById("roomCode").value;
  if(!room) return alert("Enter room code");

  const answersRef = ref(db, "rooms/" + room + "/answers");

  onValue(answersRef, (snapshot) => {
    const data = snapshot.val();
    const answersDiv = document.getElementById("answers");
    answersDiv.innerHTML = "";

    if(!data) {
        answersDiv.innerHTML = "No answers yet";
        return;
    }

    Object.keys(data).forEach(name => {
        const div = document.createElement("div");
        div.className = "answer-card";
        div.innerHTML = "<b>" + name + ":</b><br>" + data[name];
        answersDiv.appendChild(div);
    });
  });
};
</script>

</body>
</html>
